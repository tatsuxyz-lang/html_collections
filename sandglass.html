<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CHAOS-GLASS - d(^_^o)</title>
    <style>
        body { background: #050505; color: #00ff41; font-family: monospace; margin: 0; overflow: hidden; touch-action: none; }
        #canvas { width: 100vw; height: 100vh; display: block; }
        .ui { position: fixed; top: 10px; left: 10px; pointer-events: none; opacity: 0.7; }
        .msg { position: fixed; bottom: 20px; right: 20px; font-size: 10px; opacity: 0.4; }
    </style>
</head>
<body>
    <div class="ui">
        <div>TIME: <span id="time-val">0</span></div>
        <div>ENERGY: <span id="energy-val">0</span></div>
    </div>
    <div class="msg">ã‚¿ãƒƒãƒ—ã§ã€Œç ‚ã€ã‚’æ”¾æµã—ã‚ã€‚å‚¾ã‘ã‚Œã°æµã‚Œã‚‹ã€‚ã‚‹ã‚‹ã‚‹ã‚‹ã€‚</div>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let width, height;

    function init() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', init);
    init();

    // sandglass (1).html ã®ã“ã“ã‚’ä¿®æ­£
class Particle {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.vx = (Math.random() - 0.5) * 10;
        this.vy = (Math.random() - 0.5) * 10;
        this.size = Math.random() * 5 + 2;
        
        // æ–‡å­—ã®è»å›£ã‚’é…åˆ—ã§ä½œã‚‹
        const chars = ['ã‚‚', 'ã‚ˆ', 'ç¬ ', 'äº•', 'å±±', 'ã‚‹', 'ğŸŸ'];
        // ãƒ©ãƒ³ãƒ€ãƒ ã«1æ–‡å­—é¸ã¶
        this.char = chars[Math.floor(Math.random() * chars.length)];
    }
    // ...ã‚ã¨ã® update ã‚„ draw ã¯ãã®ã¾ã¾ã§OKï¼
}
        draw() {
            ctx.fillStyle = '#00ff41';
            ctx.fillText(this.char, this.x, this.y);
        }
    }

    let gx = 0, gy = 0.5; // æ¨™æº–é‡åŠ›
    window.addEventListener('deviceorientation', (e) => {
        // ã‚¹ãƒãƒ›ã‚’å‚¾ã‘ã‚‹ã¨é‡åŠ›ã®å‘ããŒå¤‰ã‚ã‚‹
        gx = (e.gamma || 0) * 0.1;
        gy = (e.beta || 0) * 0.1;
    });

    canvas.addEventListener('pointerdown', (e) => {
        // ã‚¿ãƒƒãƒ—ã—ãŸå ´æ‰€ã«ã€Œç ‚ï¼ˆãƒ“ãƒƒãƒˆï¼‰ã€ã‚’å¤§é‡ç”Ÿæˆ
        for(let i=0; i<20; i++) {
            particles.push(new Particle(e.clientX, e.clientY));
        }
        if(navigator.vibrate) navigator.vibrate(20);
    });

    function loop() {
        ctx.fillStyle = 'rgba(5, 5, 5, 0.2)'; // æ®‹åƒ
        ctx.fillRect(0, 0, width, height);
        
        particles.forEach(p => {
            p.update(gx, gy);
            p.draw();
        });

        // ç²’å­ãŒå¢—ãˆã™ããŸã‚‰å¤ã„ã‚‚ã®ã‹ã‚‰æ¶ˆã™ï¼ˆå¹³ç©ã®ãŸã‚ï¼‰
        if (particles.length > 500) particles.shift();

        document.getElementById('time-val').innerText = particles.length;
        document.getElementById('energy-val').innerText = Math.floor(Math.abs(gx) + Math.abs(gy));
        
        requestAnimationFrame(loop);
    }
    loop();
</script>
</body>
</html>
