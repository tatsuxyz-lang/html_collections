<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: black; color: lime; padding: 20px; font: 18px monospace; text-align: center; }
        h2 { border-bottom: 1px solid lime; padding-bottom: 10px; }
        button { width: 140px; height: 80px; font-size: 18px; margin: 5px; cursor: pointer; border: 2px solid lime; border-radius: 10px; }
        .vol-container { background: #222; padding: 20px; margin: 20px auto; border-radius: 15px; max-width: 300px; }
        input[type=range] { width: 100%; height: 30px; }
        #status { margin-top: 20px; color: #ff0; }
        .back-btn { margin-top: 30px; display: inline-block; color: lime; text-decoration: none; border: 1px solid lime; padding: 5px 15px; }
    </style>
</head>
<body>
    <h2>[èƒ¡æ•£ãƒè—ª] å‡ºç”Ÿãƒ”ã‚¢ãƒ ğŸ¹</h2>

    <div class="vol-container">
        éŸ³é‡èª¿æ•´ï¼ˆã‚¹ãƒãƒ›çˆ†éŸ³å¯¾å¿œï¼‰<br>
        <input type="range" id="volumeSlider" min="0" max="3" step="0.1" value="1.5">
        <div id="volLabel">ç¾åœ¨ã®ãƒ–ãƒ¼ã‚¹ãƒˆ: 1.5å€</div>
    </div>

    <button onclick="play(50)" style="background:#333; color:white;">å¿ƒéŸ³ (50Hz)</button>
    <button onclick="play(25)" style="background:#f00; color:white;">ãã‚“ã£ï¼ (25Hz)</button>
    <button onclick="play(800)" style="background:#0ff; color:black;">é³¥å±… (800Hz)</button>
    <button onclick="play(200)" style="background:#ff0; color:black;">æ³¢éŸ³ (200Hz)</button>
    
    <p id="status">è‡ªç”±ã«ã‚¯ãƒªãƒƒã‚¯ï¼</p>
    
    <a href="index.html" class="back-btn">â† æœºã«æˆ»ã‚‹</a>

<script>
let ctx = null;

// éŸ³é‡è¡¨ç¤ºã®æ›´æ–°
const slider = document.getElementById('volumeSlider');
const label = document.getElementById('volLabel');
slider.oninput = () => { label.innerText = `ç¾åœ¨ã®ãƒ–ãƒ¼ã‚¹ãƒˆ: ${slider.value}å€`; };

function play(freq) {
    // æœ€åˆã®ã‚¯ãƒªãƒƒã‚¯ã§ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’èµ·å‹•ï¼ˆã‚¹ãƒãƒ›ã®åˆ¶é™å¯¾ç­–ï¼‰
    if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
    if (ctx.state === 'suspended') ctx.resume();

    const o = ctx.createOscillator();
    const g = ctx.createGain();
    const masterVol = ctx.createGain(); // å…¨ä½“éŸ³é‡ç”¨ã®ãƒãƒ¼ãƒ‰

    o.frequency.value = freq;
    
    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ã‚’åæ˜ ï¼ˆæœ€å¤§3å€ã¾ã§ãƒ–ãƒ¼ã‚¹ãƒˆå¯èƒ½ã«ï¼‰
    masterVol.gain.value = parseFloat(slider.value);

    // æ¸›è¡°ï¼ˆä½™éŸ»ï¼‰ã®è¨­å®š
    g.gain.setValueAtTime(0.6, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);

    // æ¥ç¶š: ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ -> æ¸›è¡°å™¨ -> ãƒã‚¹ã‚¿ãƒ¼éŸ³é‡ -> å‡ºå£
    o.connect(g).connect(masterVol).connect(ctx.destination);
    
    o.start();
    o.stop(ctx.currentTime + 0.5);
    
    document.getElementById('status').innerText = `${freq}Hz é³´ã‚Šã¾ã—ãŸï¼æ¨ªéš”è†œã©ã†ï¼Ÿ`;
}
</script>
</body>
</html>
