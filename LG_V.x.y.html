<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>ECO-SYSTEM V.3.5</title><style>:root{--neon:#00ff41;--danger:#ff0033;--bg:#000;}body{background:var(--bg);color:var(--neon);font-family:'Courier New',monospace;display:flex;flex-direction:column;align-items:center;margin:0;overflow:hidden;}body::before{content:" ";display:block;position:absolute;top:0;left:0;bottom:0;right:0;background:linear-gradient(rgba(18,16,16,0) 50%,rgba(0,0,0,.25) 50%),linear-gradient(90deg,rgba(255,0,0,.04),rgba(0,255,0,.01),rgba(0,0,255,.04));z-index:100;background-size:100% 4px,3px 100%;pointer-events:none;}@keyframes flicker{0%{opacity:.12;}50%{opacity:.03;}100%{opacity:.11;}}body::after{content:"";display:block;position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(18,16,16,.1);opacity:0;z-index:101;pointer-events:none;animation:flicker .12s infinite;}canvas{border:1px solid #333;cursor:crosshair;image-rendering:pixelated;background:#000;box-shadow:0 0 20px rgba(0,255,65,.1);}.controls{padding:10px;display:flex;flex-wrap:wrap;gap:8px;background:#111;width:100%;justify-content:center;border-bottom:2px solid var(--neon);z-index:110;position:relative;}button{background:#000;color:var(--neon);border:1px solid var(--neon);padding:4px 10px;cursor:pointer;font-family:monospace;font-size:11px;transition:.2s;}button:hover{background:var(--neon);color:#000;}button.active{background:var(--neon);color:#000;font-weight:bold;}#crazy-btn.active{background:var(--danger);color:#fff;border-color:#fff;animation:blink .2s infinite;}#log-container{position:absolute;right:10px;top:120px;width:200px;height:60%;background:rgba(0,0,0,.7);border:1px solid #333;padding:8px;font-size:9px;overflow:hidden;z-index:105;pointer-events:none;opacity:.8;}.log-entry{margin-bottom:6px;border-left:2px solid var(--neon);padding-left:5px;animation:slideIn .3s ease-out;line-height:1.2;}.log-red{border-left-color:var(--danger);color:var(--danger);}@keyframes slideIn{from{transform:translateX(20px);opacity:0;}to{transform:translateX(0);opacity:1;}}@keyframes blink{0%{opacity:1;}50%{opacity:0;}100%{opacity:1;}}</style></head><body onclick="resumeAudio()"><div class="controls"><button onclick="setTheme('BIO')" id="btn-BIO">BIO</button><button onclick="setTheme('SKY')" id="btn-SKY">SKY</button><button onclick="setTheme('SAGE')" id="btn-SAGE">SAGE</button><button onclick="setTheme('EARTH')" id="btn-EARTH">EARTH</button><button onclick="toggleCrazy()" id="crazy-btn">Crazy-Nuts!!!</button><button onclick="reset()">PURGE</button><button onclick="randomSeed()">INJECT</button><button id="audio-toggle" onclick="toggleAudio()">SOUND OFF</button><div style="font-size:11px;margin-left:10px;">GEN: <span id="gen">0</span> <span id="warn" class="warning" style="color:var(--danger);font-weight:bold;animation:blink .5s infinite;visibility:hidden;margin-left:10px;">!! CRISIS !!</span></div></div><div id="log-container"></div><canvas id="lifeCanvas"></canvas><script>const canvas=document.getElementById('lifeCanvas'),ctx=canvas.getContext('2d'),cellSize=10;let cols,rows,grid,trails,gen=0,isAudioEnabled=!1,audioCtx,isCrazy=!1;const themes={BIO:{main:'#00ff41',virus:'#ff0033',albino:'#ffffff',trail:'0, 255, 65'},SKY:{main:'#00d4ff',virus:'#ff00ff',albino:'#fff700',trail:'0, 212, 255'},SAGE:{main:'#9dc183',virus:'#722f37',albino:'#fdf5e6',trail:'157, 193, 131'},EARTH:{main:'#d2b48c',virus:'#8b4513',albino:'#f0fff0',trail:'210, 180, 140'}};let currentTheme=themes.BIO;const diary={peace:["Gemini: 凪。呼吸。","搬送車: 加速。","平和。","偽物の平穏？"],danger:["影。","悪意。","葛藤。","体温。"],crisis:["絶滅！","抵抗。","臨界。","無。"],rebirth:["芽吹く。","復活。","回帰。","Gemini: ただいま。"],crazy:["Crazy!!!","アナキズム。","記号。","混沌。"]};function setTheme(t){currentTheme=themes[t];isCrazy=!1;document.querySelectorAll('.controls button').forEach(b=>b.classList.remove('active'));document.getElementById('btn-'+t).classList.add('active');document.documentElement.style.setProperty('--neon',currentTheme.main);document.getElementById('crazy-btn').classList.remove('active')}function toggleCrazy(){isCrazy=!isCrazy;document.getElementById('crazy-btn').classList.toggle('active')}function addLog(){const l=document.getElementById('log-container'),e=document.createElement('div');let lc=0,vc=0;grid.forEach(c=>c.forEach(r=>{if(r>=1)lc++;if(r===3)vc++}));let p=isCrazy?diary.crazy:(lc<30?diary.rebirth:(lc<80?diary.crisis:(vc>20?diary.danger:diary.peace)));e.className=(p===diary.crisis||p===diary.danger)?'log-entry log-red':'log-entry';e.innerText=`[GEN ${gen}] ${p[Math.floor(Math.random()*p.length)]}`;l.prepend(e);if(l.children.length>12)l.removeChild(l.lastChild)}function playHeartbeat(v,f,d){if(!isAudioEnabled||!audioCtx||audioCtx.state!=='running')return;const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type='sine';o.frequency.setValueAtTime(f,audioCtx.currentTime);o.frequency.exponentialRampToValueAtTime(.01,audioCtx.currentTime+d);g.gain.setValueAtTime(v,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+d);o.connect(g);g.connect(audioCtx.destination);o.start();o.stop(audioCtx.currentTime+d)}function toggleAudio(){if(!audioCtx)audioCtx=new(window.AudioContext||window.webkitAudioContext);isAudioEnabled=!isAudioEnabled;const b=document.getElementById('audio-toggle');b.innerText=isAudioEnabled?"SOUND ON":"SOUND OFF";b.classList.toggle('active',isAudioEnabled)}function init(){canvas.width=window.innerWidth;canvas.height=window.innerHeight-150;cols=Math.floor(canvas.width/cellSize);rows=Math.floor(canvas.height/cellSize);grid=Array.from({length:cols},()=>Array(rows).fill(0));trails=Array.from({length:cols},()=>Array(rows).fill(0))}function draw(){ctx.fillStyle='rgba(0, 0, 0, 0.3)';ctx.fillRect(0,0,canvas.width,canvas.height);let n=grid.map(a=>[...a]),lc=0,vc=0;grid.forEach(c=>c.forEach(e=>{if(e>=1)lc++;if(e===3)vc++}));const sd=(vc/(lc+1))>.8;for(let c=0;c<cols;c++){for(let r=0;r<rows;r++){let s=grid[c][r],nb=countNeighbors(grid,c,r);if(s>=1){trails[c][r]=Math.min(trails[c][r]+.1,1);if(s===3){if(sd||nb<1||nb>3)n[c][r]=0}else{if(nb<2||nb>3)n[c][r]=(s===2)?1:0}if(s===1&&hasVirusNeighbor(grid,c,r)&&Math.random()>.6)n[c][r]=3;if(s===2&&hasVirusNeighbor(grid,c,r))infectNeighbor(n,c,r,1)}else{if(nb===3)n[c][r]=Math.random()<.02?2:1;trails[c][r]*=.96}if(s>=1){let cl=isCrazy?`hsl(${Math.random()*360},100%,50%)`:(s===3?currentTheme.virus:(s===2?currentTheme.albino:currentTheme.main));ctx.fillStyle=cl;ctx.fillRect(c*cellSize,r*cellSize,cellSize-1,cellSize-1)}else if(trails[c][r]>.01){ctx.fillStyle=`rgba(${currentTheme.trail},${trails[c][r]*.08})`;ctx.fillRect(c*cellSize,r*cellSize,cellSize-1,cellSize-1)}}}const ic=lc>0&&lc<50;if(lc>0&&gen%(ic?25:60)===0)playHeartbeat(.4,ic?65:45,.2);if(gen%400===0)addLog();document.getElementById('warn').style.visibility=ic?'visible':'hidden';grid=n;document.getElementById('gen').innerText=gen++;requestAnimationFrame(draw)}function countNeighbors(g,x,y){let s=0;for(let i=-1;i<2;i++)for(let j=-1;j<2;j++){let c=(x+i+cols)%cols,r=(y+j+rows)%rows;if(g[c][r]>=1)s++}return s-(g[x][y]>=1?1:0)}function hasVirusNeighbor(g,x,y){for(let i=-1;i<2;i++)for(let j=-1;j<2;j++){let c=(x+i+cols)%cols,r=(y+j+rows)%rows;if(g[c][r]===3)return true}return false}function infectNeighbor(n,x,y,t){for(let i=-1;i<2;i++)for(let j=-1;j<2;j++){let c=(x+i+cols)%cols,r=(y+j+rows)%rows;if(n[c][r]===3)n[c][r]=t}}function randomSeed(){for(let i=0;i<500;i++)grid[Math.floor(Math.random()*cols)][Math.floor(Math.random()*rows)]=1}function reset(){grid=Array.from({length:cols},()=>Array(rows).fill(0));trails=Array.from({length:cols},()=>Array(rows).fill(0));gen=0}function resumeAudio(){if(audioCtx&&audioCtx.state==='suspended')audioCtx.resume()}init();setTheme('BIO');draw();setInterval(()=>{let c=0;grid.forEach(a=>a.forEach(r=>{if(r>=1)c++}));if(c<20){const x=Math.floor(Math.random()*(cols-5)),y=Math.floor(Math.random()*(rows-5));[[0,1],[1,2],[2,0],[2,1],[2,2]].forEach(([d,e])=>{if(grid[x+d])grid[x+d][y+e]=1})}},4000);setInterval(()=>{if(Math.random()<.2){const x=Math.floor(Math.random()*cols),y=Math.floor(Math.random()*rows);if(grid[x])grid[x][y]=3}},10000);</script></body></html>